<!DOCTYPE html>
<html>
<head>
<title>Product Details</title>
<style>
  body {
    font-family: 'Segoe UI', Roboto, Arial;
    background: #eef3f7;
    padding: 25px;
  }

  .card {
    background: white;
    padding: 24px;
    border-radius: 14px;
    box-shadow: 0 5px 18px rgba(0,0,0,0.12);
    max-width: 520px;
    margin: auto;
  }

  .success-banner {
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    color: white;
    padding: 18px;
    border-radius: 12px;
    text-align: center;
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
  }

  h2 { margin-top: 0; color: #1d3557; }
  h3 { color: #264653; margin-bottom: 8px; cursor: pointer; }

  .accordion {
    background: #fafcff;
    border-left: 5px solid #2b7a78;
    border-radius: 10px;
    margin-top: 18px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    overflow: hidden;
  }

  .accordion-header {
    padding: 14px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .accordion-content {
    padding: 0 16px 14px;
    display: none;
    animation: fadeIn 0.3s ease;
  }

  .accordion.open .accordion-content {
    display: block;
  }

  .accordion-arrow {
    font-size: 18px;
    transition: 0.3s;
  }

  .accordion.open .accordion-arrow {
    transform: rotate(90deg);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }

  input {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border: 1px solid #c9d6df;
    border-radius: 8px;
    font-size: 15px;
  }

  button {
    width: 100%;
    padding: 14px;
    margin-top: 20px;
    background: #2b7a78;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 17px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
  }

  button:hover {
    background: #226d6c;
  }

  #status {
    margin-top: 12px;
    font-weight: 600;
  }
</style>
</head>
<body>

<div class="card">

  <div class="success-banner">
   ðŸŽ‰ Congratulations! Your product is genuine and authenticated.
  </div>

  <h2>Product Authenticity Details</h2>

  <div id="info"></div>

  <!-- Accordion Sections -->
  <div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <h3>Warranty Information</h3>
      <span class="accordion-arrow">â–¶</span>
    </div>
    <div class="accordion-content">
      <p><b>Type:</b> Limited Manufacturer Warranty</p>
      <p><b>Duration:</b> 12 Months from purchase date</p>
      <p>Covers manufacturing defects and quality issues.</p>
    </div>
  </div>

  <div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <h3>Care Instructions</h3>
      <span class="accordion-arrow">â–¶</span>
    </div>
    <div class="accordion-content">
      <p>â€¢ Store in a cool, dry place</p>
      <p>â€¢ Clean using a microfiber cloth</p>
      <p>â€¢ Avoid water, chemicals & drops</p>
      <p>â€¢ Do not self-repair or modify</p>
    </div>
  </div>

  <div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <h3>Factory Batch Information</h3>
      <span class="accordion-arrow">â–¶</span>
    </div>
    <div class="accordion-content">
      <p><b>Inspection Level:</b> 4-step quality check</p>
      <p><b>QC Engineer:</b> Senior Quality Specialist</p>
      <p>Batch is certified before packaging.</p>
    </div>
  </div>

  <div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <h3>Packaging Authenticity</h3>
      <span class="accordion-arrow">â–¶</span>
    </div>
    <div class="accordion-content">
      <p>âœ” Tamper-proof hologram</p>
      <p>âœ” Encrypted QR token (unclonable)</p>
      <p>âœ” Real-time scan traceability</p>
    </div>
  </div>

  <div class="accordion">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <h3>Manufacturer Details</h3>
      <span class="accordion-arrow">â–¶</span>
    </div>
    <div class="accordion-content">
      <p><b>Company:</b> SF Dynamix Industries Pvt. Ltd.</p>
      <p><b>HQ:</b> Bengaluru, India</p>
      <p><b>Plant:</b> Coimbatore, Tamil Nadu (ISO Certified)</p>
    </div>
  </div>

  <h3>Register Your Warranty</h3>

  <label>Name:</label>
  <input type="text" id="custName" placeholder="Enter your full name">

  <label style="margin-top:15px;">Phone Number:</label>
  <input type="text" id="custPhone" placeholder="Enter your phone number">
  
  <button onclick="saveCustomerDetails()">Save Details</button>

  <div id="status" style="margin-top:15px; font-weight:600;"></div>
</div>

<script>
const sheetURL = "https://api.sheetbest.com/sheets/7b843d7a-47a4-406b-9555-28d60b46cd0c";

const params = new URLSearchParams(window.location.search);
const code = params.get("code");

window.onload = async () => {
  const infoDiv = document.getElementById("info");

  const response = await fetch(sheetURL);
  const data = await response.json();

  const match = data.find(row => row.Code === code);

  if (!match) {
    infoDiv.innerHTML = `<span style="color:red">Invalid Code</span>`;
    return;
  }

  infoDiv.innerHTML = `
    <p><b>Product:</b> ${match.Product}</p>
    <p><b>Code:</b> ${code}</p>
  `;
};

// Accordion Logic
function toggleAccordion(header) {
  const parent = header.parentElement;
  parent.classList.toggle("open");
}

async function saveCustomerDetails() {
  const name = document.getElementById("custName").value;
  const phone = document.getElementById("custPhone").value;
  const statusDiv = document.getElementById("status");

  if (!name || !phone) {
    statusDiv.innerHTML = `<span style="color:red">Please fill all fields</span>`;
    return;
  }

  await fetch(`${sheetURL}/Code/${code}`, {
    method: "PATCH",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      CustomerName: name,
      CustomerPhone: phone
    })
  });

  statusDiv.innerHTML = `<span style="color:green">Details saved successfully âœ”</span>`;
}
</script>

</body>
</html>
